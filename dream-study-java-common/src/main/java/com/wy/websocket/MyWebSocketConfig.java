package com.wy.websocket;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.socket.config.annotation.EnableWebSocket;import org.springframework.web.socket.config.annotation.WebSocketConfigurer;import org.springframework.web.socket.config.annotation.WebSocketHandlerRegistry;/** * 将WebsocketHandler注入到Spring容器中,需要开启{@link EnableWebSocket} * * @author 飞花梦影 * @date 2021-06-02 15:52:57 * @git {@link https://github.com/dreamFlyingFlower} */@Configuration@EnableWebSocketpublic class MyWebSocketConfig implements WebSocketConfigurer {	@Bean	public MyWebSocketHandler myWebsocketHandler() {		return new MyWebSocketHandler("test");	}	/**	 * 必须设置setAllowedOriginPatterns,否则前端无法链接	 */	@Override	public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {		registry.addHandler(myWebsocketHandler(), "websocket").setAllowedOrigins("*").withSockJS();	}}